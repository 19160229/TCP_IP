package server;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

public class ServerThread extends Thread {
	
	private Socket cs;
	
	public ServerThread(Socket cs) {
		// TODO Auto-generated constructor stub
		this.cs=cs;
	}
	
	public void run() {
		System.out.println("客户机IP：" + cs.getInetAddress() + " port：" + cs.getPort() + "已经连接进来");
		try {
			BufferedReader br = new BufferedReader(new InputStreamReader(cs.getInputStream()));
			PrintWriter pw = new PrintWriter(cs.getOutputStream());
			String line = null;
			while ((line = br.readLine()) != null) {
				System.out.println("线程ID："+Thread.currentThread().getId()+"客户机数据为：" + line);
				FileTrans fTrans=new FileTrans("D:\\Test.txt",cs);
				fTrans.DownloadFile();
				if (line.equalsIgnoreCase("quit"))
					break;
			}
			pw.close();
			br.close();
			System.out.println("再见！");
		} catch (Exception e) {
			// TODO: handle exception
			e.printStackTrace();
		}
		try {
			cs.close();
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
	}
}
